{"componentChunkName":"component---src-templates-blog-post-js","path":"/webauthn/the-problem-with-passwords/","webpackCompilationHash":"","result":{"data":{"site":{"siteMetadata":{"title":"Six of one","author":"Ben Lowry"}},"markdownRemark":{"id":"daf7c9f7-614e-5ec7-87ad-25f134a1986f","excerpt":"Passwords are hard.\nData breaches frequently expose poor security practices,\nproving that, as an industry, we‚Äôre not very good at this.\nAs developers have‚Ä¶","html":"<p>Passwords are hard.\nData breaches frequently expose poor security practices,\nproving that, as an industry, we‚Äôre not very good at this.\nAs developers have become more aware of these challenges,\nwe‚Äôve tried to offload password management to ‚Äúthe big guns‚Äù,\nmaking our lives easier, but what about our users?\nFrom confusing or ineffective password complexity restrictions\nto password fields you can‚Äôt paste into,\nit‚Äôs no wonder so many people find one password and stick with it.</p>\n<p>The Web Authentication API (WebAuthn)\nallows you to build passwordless authentication or two factor authentication\ninto your web applications seamlessly in the browser.\nUsing an asymmetric key pair where the public key is sent to a server,\nand the private key stored securely on your device,\nyour secrets are never sent over the internet,\ngreatly reducing the risk of phishing attempts.</p>\n<p>This post will provide an introduction to WebAuthn,\noutlining the benefits, trade-offs, and future of this new authentication protocol.\nThrough a code demonstration,\nyou will see how to build an experience that puts control over their credentials (literally) back into the hands of your users.</p>\n<hr>\n<aside>\nPrefer <a href=\"https://youtu.be/poJt8dZH9qE\">watching (35 minutes)</a> to reading?\n<p>Or maybe you‚Äôd rather look at <a href=\"https://speakerdeck.com/bplowry/forget-your-passwords-with-the-web-authentication-api\">slides and resources</a>?</p>\n\n          <div\n            class=\"gatsby-resp-iframe-wrapper\"\n            style=\"padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden;margin-bottom: 1.0725rem\"\n          >\n            <iframe src=\"https://www.youtube.com/embed/poJt8dZH9qE\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen style=\"\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n          \"></iframe>\n\n          </div>\n          \n<hr>\n<p>üë∑ ‚ÄçÔ∏èüöß üë∑‚Äç‚ôÇÔ∏è\nPlease hold! I‚Äôll be updating this post over the next few days</p>\n<hr>\n<h2>What is authentication?</h2>\n<p>Authentication is about proving your identity.\nAn authentication ceremony allows a user to prove that they are who they say they are.\nIn order to prove your identity, you will typically use\nsomething you know,\nsomething you have, or\nsomething you are.</p>\n<img src=\"./know-have-are.png\" alt=\"Examples include a password you know, a device you have, or a fingerprint/facial features that you are.\">\n<p>In web applications, authentication typically involves logging in to a system,\nbut authentication happens in real-world situations, too.\nImagine you are trying to get into a nightclub.\nAfter waiting in line, you are asked by a bouncer to present your ID.</p>\n<img src=\"./bouncer-id.png\" alt=\"ID cards are important when trying to get into a nightclub\">\n<p>This exchange has serves a dual purpose:\nfirstly, they need to check your date of birth to figure out if you‚Äôre old enough to enter ‚Äî that‚Äôs <em>authorization</em> ‚Äî\nbut more importantly, they need to verify that it‚Äôs <em>your</em> date of birth they‚Äôre checking ‚Äî <em>authentication</em>.</p>\n<p>There are a few attributes of the card that allow it to be used as verification of your identity:</p>\n<ol>\n<li>It‚Äôs issued by a trusted source, which can be verified by making sure it has the right layout, colours, holograms, etc.</li>\n<li>The photo looks like you</li>\n<li>It has your name on it</li>\n</ol>\n<!-- <aside>\nThe bouncer checking that you are old enough is actually related not to authentication, but to authorization --\nfiguring out if you have permission to do or see something.\nThe bouncer may also consider things like whether you meet a dress code, if you're on a guest list, or that you're in a fit state to enter.\nIn web applications, authorization might decide what elements of a user interface you can see,\nfor example \"‚öô Admin settings\" would only be shown to admin users,\nor you won't be able to browse/watch videos on Netflix if you haven't made a payment.\n<aside> -->\n<h2>What‚Äôs wrong with passwords?</h2>\n<p>People typically don‚Äôt make good passwords.\nSome of us might use password managers to help, but we‚Äôre a small minority,\nand even the most conscientious user has a few passwords outside of their password manager,\nfor example their OS user account, or the master password for their password manager.</p>\n<p>Because we know people struggle to make strong passwords,\nwe add a whole lot of extra rules around them,\nlike password complexity rules\nor forced password changes every 90 days.\nThese rules can give the appearance of a stronger password,\nor less risk when a password is compromised.\nWhether that is true depends on how you use them.</p>\n<p>Users can meet complexity requirements by adding numbers or changing letters to symbols,\nbut complexity rules alone don‚Äôt make a good password.</p>\n<img src=\"./password1.png\" alt=\"Changing 'password' to 'P@ssword1' does not make it a good password\">\n<p>Password complexity rules can provide a false sense of security,\nsince so many of us simply add numbers onto the end or make common substitutions of letters for symbols.\nThe idea that a complex password is better doesn‚Äôt hold up when so many passwords follow similar patterns.</p>\n<p>A password is intended to be something that is only known by the user,\nand can be verified by the service where they use it.\nIt shouldn‚Äôt be stored on either side in a way that someone else could decipher it.\nFor users, that usually means not writing it down in a notebook titled ‚ÄúPasswords‚Äù,\nand for application developers, that means not storing it in plain text.\nThe password is a shared secret.</p>\n<img src=\"./think-you-can.png\" alt=\"Think you can trust other people with your secrets?\">\n<p>If you trust your friends, but you wouldn‚Äôt give them your bank account password,\nyou‚Äôre probably not OK with someone you don‚Äôt trust getting your passwords.\nIf your password has been compromised, you may get some warning,\nfor example a bank may require verification of any unusual activity (e.g. large transfers to an attacker‚Äôs bank account).\nOther times, we only know when large dumps of passwords end up on the internet, at sites like</p>\n<a href=\"https://haveibeenpwned.com/\" target=\"_blank\" rel=\"noopener\">\n  <img src=\"./hibp.jpg\" alt=\"Have I Been Pwned allows you to check if your accounts are involved in data breaches.\">\n</a>\n<p>Even if none of your accounts or passwords have been contained in a published breach,\nattackers still have ways to get them from you.\nMany people have had their passwords stolen by phishing websites\n‚Äî websites that are designed to look like legitimate websites with the hope that you‚Äôll enter your login information into them.\nSometimes, they‚Äôll find a list of common passwords and try them with a number of accounts.</p>\n<p>Ultimately, <a href=\"https://techcommunity.microsoft.com/t5/Azure-Active-Directory-Identity/Your-Pa-word-doesn-t-matter/ba-p/731984\">your password isn‚Äôt the problem</a>, nor is how they are stored. The biggest problem with passwords is not how we deal with passwords, but that we have them at all.</p>\n<h2>What is WebAuthn?</h2>\n<p>WebAuthn is a specification in the <abbr title=\"World Wide Web Consortium\">W3C</abbr>.\nThe primary contributors are Mozilla, Microsoft, Google, FIDO Alliance and the W3C.</p>\n<p>It defines a standard by which browsers can get assertions from authenticators,\nand how web servers can validate those assertions.\nIt also defines a JavaScript API for web applications to request credentials from the browser.</p>\n<p>The Web Authentication API, combined with the Client-to-Authenticator Protocol (CTAP),\nmake up the FIDO2 protocol.</p>\n<h2>How does it work?</h2>\n<p>Using a device called an authenticator</p>\n<ul>\n<li>a separate device, known as an external, cross-platform or roaming authenticator</li>\n<li>built in to a phone or laptop, known as an internal, platform or bound authenticator</li>\n</ul>\n<p>What gets sent around</p>\n<ul>\n<li>for registering credentials:</li>\n<li>website information</li>\n<li>for getting credentials</li>\n<li>website information</li>\n</ul>\n<p>You may have noticed that we never send anything secret.</p>\n <img src=\"./no-secrets.png\" alt=\"\" role=\"presentation\">\n<p>The authenticator can store credential information for each login you‚Äôd like to use</p>\n<ul>\n<li>website identifier</li>\n<li>user identifier</li>\n<li>credential identifier</li>\n</ul>\n<p><span role=\"img\" alt=\"This section is being worked on\">üöß DETOUR ‚û°</span></p>\n<!-- Some authenticators store the _actual_ private key for the credential source,\nin this case they are referred to as **resident keys**, because they are resident on the authenticator.\nAuthenticators that support resident keys can only store a limited number -- because they have to physically store something, and storage is limited. The Yubikey 5C, for example, can store 25 resident keys.\n\nAuthenticators can hold an unlimited number of **non-resident keys** -- because nothing is stored on the device.\nThat might sound strange, but this actually works by encrypting the _credential_ private key using the private key baked in to the _device_ during manufacturing, and sending that to the client (browser, app, etc) as the credential ID.\nThat means when the application requests an assertion for any particular credential ID, the authenticator first has to decrypt the credential ID to get the private key, so that it can sign the authenticatorData.\nAs a consequence, non-resident keys cannot be used for usernameless scenarios, which we'll go into a bit further later on. -->\n<h2>Can I use it?</h2>\n<p>In a word, yes. Read on if you want more detail üòÜ</p>\n<p><a href=\"http://caniuse.com\">Can I Use</a> allows you to import data from your country,\nand also has a ‚Äúusage relative‚Äù option, which can help narrow down to your targeted users,\nor you can import actual data for your users from Google Analytics.</p>\n<script src=\"https://cdn.jsdelivr.net/gh/ireade/caniuse-embed/caniuse-embed.min.js\"></script>\n<p class=\"ciu_embed\" data-feature=\"webauthn\" data-periods=\"future_1,current,past_1\" data-accessible-colours=\"false\">\n  <a href=\"http://caniuse.com/#feat=webauthn\">\n    <picture>\n      <source type=\"image/webp\" srcset=\"https://res.cloudinary.com/ireaderinokun/image/upload/v1569250922/caniuse-embed/webauthn-2019-9-23.webp\">\n      <source type=\"image/png\" srcset=\"https://res.cloudinary.com/ireaderinokun/image/upload/v1569250922/caniuse-embed/webauthn-2019-9-23.png\">\n      <source type=\"image/jpeg\" srcset=\"https://res.cloudinary.com/ireaderinokun/image/upload/v1569250922/caniuse-embed/webauthn-2019-9-23.jpg\">\n      <img src=\"https://res.cloudinary.com/ireaderinokun/image/upload/v1569250922/caniuse-embed/webauthn-2019-9-23.png\" alt=\"Data on support for the webauthn feature across the major browsers from caniuse.com\">\n    </picture>\n  </a>\n</p>\n<p>At time of writing, it is supported in Chrome, Firefox, Edge and Safari (macOS),\nand not supported on Safari (or any other browser) on iOS.\nWhether someone can actually use it depends on\nif they have an external authenticator\nor if their phone/computer can act as an authenticator.</p>\n<p>I don‚Äôt have numbers, but I‚Äôm going to guess that a very small minority own authenticator devices like a Yubikey.</p>\n<p>It‚Äôs more likely that someone will have a phone/computer that is capable:</p>\n<ul>\n<li>‚úÖ Android phone from Android 7 and above (<a href=\"https://developer.android.com/about/dashboards?hl=en\">~58% of Android phones</a>)</li>\n<li>‚úÖ Windows 10 device capable of Windows Hello ‚Äî <span role=\"img\" alt=\"Note\">‚Ñπ</span> some devices are capable of using Windows Hello with a PIN, so you may not need a computer with a fingerprint scanner or an infra-red camera.</li>\n<li>‚úÖ macOS device with Face ID or Touch ID</li>\n<li>‚ùå unfortunately, it‚Äôs not supported on iOS yet.</li>\n</ul>\n<p>The lack of support on some devices doesn‚Äôt need to hold you back, though. You can detect support in the browser and provide different experiences for users on devices without those capabilities, without taking anything away.</p>\n<h2>How do I use the JavaScript API?</h2>\n<p>The JavaScript API only has a few methods.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// feature detection for WebAuthn</span>\nwindow<span class=\"token punctuation\">.</span>PublicKeyCredential\n\n<span class=\"token comment\">// detection for platform/on-device authenticator</span>\n<span class=\"token keyword\">await</span> window<span class=\"token punctuation\">.</span>PublicKeyCredential<span class=\"token punctuation\">.</span><span class=\"token function\">isUserVerifyingPlatformAuthenticatorAvailable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// registration of authenticator</span>\n<span class=\"token keyword\">await</span> window<span class=\"token punctuation\">.</span>navigator<span class=\"token punctuation\">.</span>credentials<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// authenticate with authenticator</span>\n<span class=\"token keyword\">await</span> window<span class=\"token punctuation\">.</span>navigator<span class=\"token punctuation\">.</span>credentials<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">)</span></code></pre></div>\n<p>If you‚Äôre wondering about those <code class=\"language-text\">options</code> parameters,\n<a href=\"https://webauthn.guide/\">webauthn.guide by Duo</a> does a much better job explaining them than I would.</p>\n<h2>How can WebAuthn be better for users?</h2>\n<p>üö´üîë</p>\n<h2>Resources</h2>\n<p><strong>Specification</strong></p>\n<ul>\n<li>Level 1 ‚Äì W3C Recommendation <a href=\"https://www.w3.org/TR/webauthn/\">https://www.w3.org/TR/webauthn/</a></li>\n<li>Level 2 ‚Äì Working Draft <a href=\"https://w3c.github.io/webauthn/\">https://w3c.github.io/webauthn/</a></li>\n</ul>\n<p>Demos</p>\n<ul>\n<li><a href=\"https://webauthn.io/\">https://webauthn.io/</a></li>\n<li><a href=\"https://webauthn.me/debugger\">https://webauthn.me/debugger</a></li>\n<li><a href=\"https://www.passwordless.dev\">https://www.passwordless.dev</a></li>\n<li><a href=\"https://webauthntest.azurewebsites.net/\">https://webauthntest.azurewebsites.net/</a></li>\n</ul>\n<p>Guides</p>\n<ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Authentication_API\">https://developer.mozilla.org/en-US/docs/Web/API/Web_Authentication_API</a></li>\n<li><a href=\"https://webauthn.guide/\">https://webauthn.guide/</a></li>\n</ul>\n<p>Workshops</p>\n<ul>\n<li><a href=\"https://fidoalliance.org/developer-tutorial-getting-started-with-webauthn/\">https://fidoalliance.org/developer-tutorial-getting-started-with-webauthn/</a></li>\n<li><a href=\"https://codelabs.developers.google.com/codelabs/webauthn-reauth/#0\">https://codelabs.developers.google.com/codelabs/webauthn-reauth/#0</a></li>\n</ul>\n<p>Libraries</p>\n<ul>\n<li>.NET <a href=\"https://github.com/abergs/fido2-net-lib\">https://github.com/abergs/fido2-net-lib</a></li>\n<li>Node.js <a href=\"https://github.com/apowers313/fido2-lib\">https://github.com/apowers313/fido2-lib</a></li>\n<li>Various <a href=\"https://developers.yubico.com/Software_Projects/FIDO2/\">https://developers.yubico.com/Software_Projects/FIDO2/</a></li>\n</ul>\n<p>More links</p>\n<ul>\n<li><a href=\"https://github.com/herrjemand/awesome-webauthn\">https://github.com/herrjemand/awesome-webauthn</a></li>\n</ul>","frontmatter":{"title":"Forget your passwords with the Web Authentication API","date":"September 23, 2019","description":"<p> There are plenty of problems with passwords: we forget them, we re-use them, and we make them too easy to guess. There's light on the horizon, though. The Web Authentication API (WebAuthn) could spell the end of passwords on the internet. </p><p> By delegating responsibility for authentication to your device, websites using WebAuthn won't need to ask you for your password, so it can never be stolen from you, and nobody else can get into your accounts. </p><p> Read more for an introduction to your new #passwordless life </p>"},"fields":{"readingTime":{"text":"9 min read"}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/webauthn/the-problem-with-passwords/","previous":{"fields":{"slug":"/becoming-telstra-purple/"},"frontmatter":{"title":"Becoming Telstra Purple"}},"next":{"fields":{"slug":"/webauthn/forget-your-passwords/"},"frontmatter":{"title":"Forget your passwords with the Web Authentication API"}}}}}